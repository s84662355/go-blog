{"remainingRequest":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/views/index/setting/upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/views/index/setting/upload.vue","mtime":1608889401538},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _elementUi = require(\"element-ui\");\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _auth = require(\"@/utils/auth\");\n\nvar _global = require(\"@/utils/global\");\n\nvar _setting = require(\"@/api/setting\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'SettingUplaod',\n  data: function data() {\n    return {\n      dialogImageUrl: '',\n      dialogVisible: false,\n      formLabelWidth: '80px',\n      limitNum: 5,\n      form: {},\n      upload_url: _global.httphost + '/upload/image?token=' + (0, _auth.getToken)(),\n      fileList: []\n    };\n  },\n  computed: {},\n  created: function created() {\n    var _this = this;\n\n    (0, _setting.GetIndexPics)().then(function (response) {\n      _this.fileList = response.data;\n    }).catch(function (err) {\n      console.log(err);\n    });\n  },\n  methods: {\n    clearFile: function clearFile() {\n      this.fileList = [];\n    },\n    submitFile: function submitFile() {\n      var _this2 = this;\n\n      console.log(this.fileList);\n      (0, _setting.UpdateIndexPics)({\n        imgs: this.fileList\n      }).then(function (response) {\n        _this2.postForm = response.data;\n\n        _this2.$notify({\n          title: 'Success',\n          dangerouslyUseHTMLString: true,\n          message: '修改成功',\n          type: 'success',\n          duration: 2000\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    uploadSectionFile: function uploadSectionFile(params) {\n      console.log(params);\n      var self = this,\n          file = params.file,\n          fileType = file.type,\n          file_url = self.$refs.upload.uploadFiles[0].url;\n      var img = new Image();\n      img.src = file_url;\n\n      img.onload = function () {\n        self.uploadFile11(file);\n      };\n    },\n    uploadFile11: function uploadFile11(file) {\n      var self = this,\n          formData = new FormData();\n      formData.append('file', file);\n\n      _axios.default.post(self.upload_url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(function (res) {\n        if (res.data.code == 20000) {\n          self.fileList.push({\n            name: res.data.data,\n            url: res.data.data\n          });\n        } else {\n          _.$alert('上传失败，请重新上传', '提示', {\n            type: 'error'\n          });\n        } //  self.$refs.upload.uploadFiles = []; \n\n      }).catch(function (err) {});\n    },\n    // 上传文件之前的钩子\n    handleBeforeUpload: function handleBeforeUpload(file) {\n      console.log('before');\n\n      if (!(file.type === 'image/png' || file.type === 'image/gif' || file.type === 'image/jpg' || file.type === 'image/jpeg')) {\n        this.$notify.warning({\n          title: '警告',\n          message: '请上传格式为image/png, image/gif, image/jpg, image/jpeg的图片'\n        });\n      }\n\n      var size = file.size / 1024 / 1024 / 2;\n\n      if (size > 2) {\n        this.$notify.warning({\n          title: '警告',\n          message: '图片大小必须小于2M'\n        });\n      }\n    },\n    // 文件超出个数限制时的钩子\n    handleExceed: function handleExceed(files, fileList) {},\n    // 文件列表移除文件时的钩子\n    handleRemove: function handleRemove(file, fileList) {\n      this.fileList = fileList;\n      console.log(this.fileList);\n    },\n    // 点击文件列表中已上传的文件时的钩子\n    handlePictureCardPreview: function handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    uploadFile: function uploadFile() {\n      this.$refs.upload.submit();\n    }\n  }\n};\nexports.default = _default;",null]}