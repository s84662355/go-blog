{"remainingRequest":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/babel-loader/lib/index.js!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/components/Upload/SingleImage3.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/components/Upload/SingleImage3.vue","mtime":1608023738707},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _qiniu = require(\"@/api/qiniu\");\n\nvar _article = require(\"@/api/article\");\n\nvar _global = require(\"@/utils/global\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'SingleImageUpload3',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      tempUrl: '',\n      uploadUrl: _global.httphost + '/upload/image',\n      dataObj: {\n        token: '',\n        key: ''\n      }\n    };\n  },\n  computed: {\n    imageUrl: function imageUrl() {\n      return this.value;\n    }\n  },\n  methods: {\n    rmImage: function rmImage() {\n      var _this = this;\n\n      (0, _article.delImage)(this.value).then(function (response) {\n        if (response.code === 20000) {\n          _this.emitInput('');\n\n          return;\n        }\n\n        _this.$message({\n          message: '删除失败',\n          type: 'error',\n          showClose: true\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    emitInput: function emitInput(val) {\n      this.$emit('input', val);\n    },\n    handleImageSuccess: function handleImageSuccess(res, file) {\n      if (res.code !== 20000) {\n        this.$message({\n          message: '上传失败',\n          type: 'error',\n          showClose: true\n        });\n        return false;\n      }\n\n      this.emitInput(res.data);\n    },\n    beforeUpload: function beforeUpload() {\n      var _this2 = this;\n\n      var _self = this;\n\n      return new Promise(function (resolve, reject) {\n        (0, _qiniu.getToken)().then(function (response) {\n          var key = response.data.qiniu_key;\n          var token = response.data.qiniu_token;\n          _self._data.dataObj.token = token;\n          _self._data.dataObj.key = key;\n          _this2.tempUrl = response.data.qiniu_url;\n          resolve(true);\n        }).catch(function (err) {\n          console.log(err);\n          reject(false);\n        });\n      });\n    }\n  }\n};\nexports.default = _default;",null]}