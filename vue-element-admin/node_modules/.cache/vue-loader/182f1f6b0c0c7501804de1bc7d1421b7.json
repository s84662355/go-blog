{"remainingRequest":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/views/index/setting/websiteInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/views/index/setting/websiteInfo.vue","mtime":1608976768292},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Tinymce from '@/components/Tinymce'\nimport Upload from '@/components/Upload/SingleImage3'\nimport MDinput from '@/components/MDinput'\nimport Sticky from '@/components/Sticky' // 粘性header组件\nimport { validURL } from '@/utils/validate'\nimport { PostWebsiteInfo , GetWebsiteInfo } from '@/api/setting'\n\nimport { searchUser } from '@/api/remote-search'\n \n \n\n\n  import {\n    quillEditor\n  } from 'vue-quill-editor'\n  import 'quill/dist/quill.core.css'\n  import 'quill/dist/quill.snow.css'\n  import 'quill/dist/quill.bubble.css'\n\n\nconst defaultForm = {\n      avatar: 'https://s2.ax1x.com/2020/01/17/1SCadg.png',\n      slogan: 'The way up is not crowded, and most chose ease.',\n      name: 'FZY′blog',\n      domain: 'https://www.fengziy.cn',\n      notice: '本博客的Demo数据由Mockjs生成',\n      desc: '一个It技术的探索者'\n}\n\n \n\n\nexport default {\n  name: 'Websiteinfo',\n  components: { Tinymce, MDinput, Upload, Sticky,     quillEditor },\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    const validateRequire = (rule, value, callback) => {\n      if (value === '') {\n        this.$message({\n          message: rule.field + '为必传项',\n          type: 'error'\n        })\n        callback(new Error(rule.field + '为必传项'))\n      } else {\n        callback()\n      }\n    }\n    const validateSourceUri = (rule, value, callback) => {\n      if (value) {\n        if (validURL(value)) {\n          callback()\n        } else {\n          this.$message({\n            message: '外链url填写不正确',\n            type: 'error'\n          })\n          callback(new Error('外链url填写不正确'))\n        }\n      } else {\n        callback()\n      }\n    }\n    return {\n      postForm: Object.assign({}, defaultForm),\n   \n      loading: false,\n  \n      avatar: 'https://s2.ax1x.com/2020/01/17/1SCadg.png',\n      slogan: 'The way up is not crowded, and most chose ease.',\n      name: 'FZY′blog',\n      domain: 'https://www.fengziy.cn',\n      notice: '本博客的Demo数据由Mockjs生成',\n      desc: '一个It技术的探索者',\n\n\n  \n      rules: {\n        avatar: [{ validator: validateRequire }],\n        slogan: [{ validator: validateRequire }],\n        name: [{ validator: validateRequire }],\n        domain: [{ validator: validateRequire }],\n        notice: [{ validator: validateRequire }],\n         desc: [{ validator: validateRequire }]\n \n      },\n       \n       \n        editorOption:  {}\n         \n \n    }\n  },\n  computed: {\n    contentShortLength() {\n      return this.postForm.summary.length\n    },\n    lang() {\n      return this.$store.getters.language\n    },\n     \n  },\n  created() {\n    GetWebsiteInfo().then(response => {\n\n  this. postForm =  response.data \n    })\n\n\n  },\n  methods: {\n    fetchData(id) {\n      fetchArticle(id).then(response => {\n        this.postForm = response.data\n        this.postForm.comment_disabled = response.data.comment_disabled==0?false:true\n        this.postForm.author=response.data.authorname\n        // set tagsview title\n        this.setTagsViewTitle()\n\n        // set page title\n        this.setPageTitle()\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    setTagsViewTitle() {\n      const title = this.lang === 'zh' ? '编辑文章' : 'Edit Article'\n      const route = Object.assign({}, this.tempRoute, { title: `${title}-${this.postForm.id}` })\n      this.$store.dispatch('tagsView/updateVisitedView', route)\n    },\n    setPageTitle() {\n      const title = 'Edit Article'\n      document.title = `${title} - ${this.postForm.id}`\n    },\n    submitForm() {\n      this.$refs.postForm.validate(valid => {\n        if (valid) {\n           this.loading = true\n      \n            PostWebsiteInfo({websiteInfo:this.postForm}  ).then(() => {\n              this.loading = false\n              this.$notify({\n                title: 'Success',\n                dangerouslyUseHTMLString: true,\n                message: '修改成功',\n                type: 'success',\n                duration: 2000\n              })\n               ///     this.$router.push({path:'/articles/list' });\n            })\n          \n\n\n\n          // this.$notify({\n          //   title: '成功',\n          //   message: '发布文章成功',\n          //   type: 'success',\n          //   duration: 2000\n          // })\n          // this.postForm.status = 'published'\n          this.loading = false\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n\n\n\n\n      })\n    },\n    draftForm() {\n     \n    },\n    getRemoteUserList(query) {\n      \n    }\n  }\n}\n",null]}