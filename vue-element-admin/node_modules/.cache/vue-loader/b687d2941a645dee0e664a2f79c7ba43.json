{"remainingRequest":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/components/Upload/SingleImage3.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/src/components/Upload/SingleImage3.vue","mtime":1608023738707},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenjiahao/GoDemo/go-blog/vue-element-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getToken } from '@/api/qiniu'\nimport { delImage } from '@/api/article'\nimport { httphost } from '@/utils/global'\n// import { Cookies } from 'js-cookie'\nexport default {\n  name: 'SingleImageUpload3',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      tempUrl: '',\n      uploadUrl: httphost + '/upload/image',\n      dataObj: { token: '', key: '' }\n    }\n  },\n  computed: {\n    imageUrl() {\n      return this.value\n    }\n  },\n  methods: {\n    rmImage() {\n      delImage(this.value).then(response => {\n        if (response.code === 20000){\n          this.emitInput('')\n          return\n        }\n        this.$message({\n          message: '删除失败',\n          type: 'error',\n          showClose: true\n        })\n      }).catch(err => {\n        console.log(err)\n      })\n    },\n    emitInput(val) {\n      this.$emit('input', val)\n    },\n\n    handleImageSuccess(res, file) {\n      if (res.code !== 20000){\n        this.$message({\n          message: '上传失败',\n          type: 'error',\n          showClose: true\n        })\n        return false\n      }\n      this.emitInput(res.data)\n    },\n    beforeUpload() {\n      const _self = this\n      return new Promise((resolve, reject) => {\n        getToken().then(response => {\n          const key = response.data.qiniu_key\n          const token = response.data.qiniu_token\n          _self._data.dataObj.token = token\n          _self._data.dataObj.key = key\n          this.tempUrl = response.data.qiniu_url\n          resolve(true)\n        }).catch(err => {\n          console.log(err)\n          reject(false)\n        })\n      })\n    }\n  }\n}\n",null]}